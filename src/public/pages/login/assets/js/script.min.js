const popupContainer=document.querySelector("#popup-container");function sendPopup(e,o){const n=createElement("div",{class:`popup popup-${e}`});popupContainer.appendChild(n);const t=createElement("div",{class:"popup-message"},o);function r(e){const o=setInterval(()=>{popupContainer.contains(e)?(e.style.opacity||(e.style.opacity=.8),e.style.opacity>0?e.style.opacity-=.1:(clearInterval(o),popupContainer.removeChild(e))):clearInterval(o)},30)}n.appendChild(t),n.onclick=(()=>r(n)),setTimeout(()=>{n&&r(n)},5e3)}const form=document.querySelector("form"),errorMessage="Login credentials are invalid";let config=void 0;function createElement(e,o,n){let t,r,a=document.createElement(e);if(o)for(t in o)if("style"===t)for(r in o.style)a.style[r]=o.style[r];else a.setAttribute(t,o[t]);return n&&(a.innerHTML=n),a}function getCookies(){let e=document.cookie,o=0,n={};return document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)&&(e=RegExp.$1,o=1),0===o?e.split(/[,;]/).map(function(e){let o=e.split(/=/,2),t=decodeURIComponent(o[0].trimLeft()),r=o.length>1?decodeURIComponent(o[1].trimRight()):null;n[t]=r}):e.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function(e,o){let t=e,r='"'===o.charAt(0)?o.substr(1,-1).replace(/\\(.)/g,"$1"):o;n[t]=r}),n}function getCookie(e){return getCookies()[e]}fetch("login/data").then(e=>e.json()).then(e=>{config={min:e.username.min>e.email.min?e.email.min:e.username.min,max:e.username.max<e.email.max?e.email.max:e.username.max,password:e.password},e.username.min>e.email.min?form.login.setAttribute("minlength",e.email.min):form.login.setAttribute("minlength",e.username.min),e.username.max<e.email.max?form.login.setAttribute("maxlength",e.email.max):form.login.setAttribute("maxlength",e.username.max)}),form.onsubmit=(e=>{e.preventDefault(),!form.login.value||form.login.value.length<config.min||form.login.value.length>config.max?sendPopup("error",errorMessage):!form.password.value||form.password.value.length<config.password.min||form.password.value.length>config.password.max?sendPopup("error",errorMessage):fetch("login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`${form.login.value.includes("@")?`email=${form.login.value.toLowerCase()}`:`username=${form.login.value}`}&password=${form.password.value}`}).then(e=>e.json()).then(e=>{if(e.success){const o=CryptoJS.AES.encrypt(form.password.value,getCookie("user_session"));localStorage.setItem("key",o),window.location.href=e.location}else sendPopup("error",errorMessage)}).catch(e=>console.error(e))});